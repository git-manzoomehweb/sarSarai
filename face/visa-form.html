<div id="visa-form-resize" class="free-form-container form-container w-full">
    <basis core="schema" run="atclient"
        schemaurl="/schema/domainform/73984926-AF32-424E-ADF4-FDC2EB72A64F/54AE4D09-CF9A-49CE-9738-0F39596F8C68/fa/visa"
        displaymode="new" button="[data-btn-uploadfooter]" resultsourceid="upload.datafooter"
        OnRendered="RenderFormFooter"></basis>
    <basis core="api" if="{##cms.uploadFooter.run|(false)##}" run="atclient"
        url="/schema/domainform/73984926-AF32-424E-ADF4-FDC2EB72A64F/fa/editobject"
        method="post"
        body="object_edit={##cms.uploadFooter.value##}&captcha={##cms.uploadFooter.captcha##}&captchaid={##cms.uploadFooter.captchaid##}"
        content-type="application/x-www-form-urlencoded" triggers='cms.uploadFooter'
        OnProcessed="OnProcessedEditObjectFooter"></basis>
    <div class="free-form-content">
        <basis core="callback" run="atclient" method="uploadDocumentFooter" triggers="upload.datafooter">
        </basis>
        <div class="captcha-button">
            <div id="captchaContainer" class="captchaContainerclass captcha-sefaresh ml-2.5 max-xl:ml-0 max-xl:mb-[20px]"
            data-bc-answer-container data-bc-schema-info-multi="0" data-bc-schema-info-word="58"
            data-bc-schema-info-part="1" data-bc-schema-info-part-0-type="text">
            <basis core="dbsource" source="trust_login" name="captcha" run="atclient"
                triggers="captcha.refreshFooter">
                <member name="code" type="scalar" request="captcha"></member>
            </basis>
            <basis datamembername="captcha.code" core="print" run="atclient"
                OnRendered="captchaRenderedFooter">
                <face>
                    <script
                        type="text/template"><div class="d-inline-block"><div class="d-flex">

                            <div class="float-right"><input type="text" class="contactUsInput codeinputm" name="captcha" maxlength="4" placeholder="Security code"/><input type="hidden" name="captchaid" value="@captcha@" /></div>
                            <div class="float-right h-[65px] leading-[65px]">
                                <img src="https://www.basispanel.ir/@captcha@" width="120" height="60" alt="captcha" />
                                <svg class="cursor-pointer inline-block align-middle" onclick="refreshCaptchaFooter()" width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.1247 8.56165H18.1238C18.0007 8.56175 17.8788 8.5861 17.7651 8.63331C17.6514 8.68052 17.5481 8.74967 17.4611 8.8368C17.3741 8.92393 17.3052 9.02734 17.2581 9.14113C17.2111 9.25492 17.187 9.37685 17.1871 9.49997C17.1859 10.8143 16.8245 12.1032 16.1421 13.2265C15.4597 14.3498 14.4824 15.2646 13.3166 15.8714C12.1507 16.4782 10.8408 16.7538 9.52921 16.6683C8.21765 16.5827 6.95463 16.1393 5.87744 15.3862C2.63134 13.1132 1.83959 8.62309 4.11255 5.37696C6.38552 2.13083 10.8757 1.33899 14.1218 3.61204C14.6129 3.95501 15.0592 4.358 15.4504 4.81165H12.8121C12.5635 4.81165 12.325 4.91042 12.1492 5.08623C11.9734 5.26205 11.8746 5.5005 11.8746 5.74915C11.8746 5.99779 11.9734 6.23624 12.1492 6.41206C12.325 6.58787 12.5635 6.68665 12.8121 6.68665H17.1871C17.4358 6.68665 17.6742 6.58787 17.85 6.41206C18.0259 6.23624 18.1246 5.99779 18.1246 5.74915V1.37415C18.1246 1.12551 18.0259 0.887048 17.85 0.711233C17.6742 0.535418 17.4358 0.436646 17.1871 0.436646C16.9385 0.436646 16.7 0.535418 16.5242 0.711233C16.3484 0.887048 16.2496 1.12551 16.2496 1.37415V2.93536C15.9206 2.62321 15.5689 2.33596 15.1973 2.07598C14.2225 1.39342 13.1228 0.909542 11.9609 0.651979C10.7991 0.394417 9.59797 0.368213 8.42603 0.574863C7.25409 0.781513 6.13433 1.21697 5.13067 1.85637C4.12702 2.49578 3.25914 3.3266 2.57658 4.30141C1.19808 6.27013 0.658111 8.70582 1.07546 11.0727C1.49281 13.4395 2.83329 15.5436 4.80201 16.9221C6.31776 17.9898 8.12639 18.563 9.98041 18.5633C10.5144 18.5631 11.0474 18.5162 11.5732 18.4233C13.6714 18.0531 15.5722 16.9556 16.9417 15.3235C18.3112 13.6914 19.062 11.6289 19.0621 9.49833C19.0619 9.24983 18.963 9.01159 18.7873 8.83596C18.6115 8.66032 18.3732 8.56166 18.1247 8.56165Z" fill="#18181B"/></svg>
                            </div>
                            
                        </div></div></script>
                </face>
            </basis>
        </div>
        <button class="data-body-btn w-[126px] h-12 px-4 py-2 bg-primary-600 rounded-2xl justify-center items-center gap-2.5 flex cursor-pointer hover:bg-secondary-600" type="button" data-btn-uploadfooter><span class="text-zinc-50 text-base font-normal leading-normal">ارسال</span></button>
        <div class="Loading_Form data-body-btn w-[126px] h-12 px-4 py-2 bg-secondary-800 rounded-2xl justify-center items-center gap-2.5 flex">
            <div id="ballsWaveG" class="ext-zinc-50 text-base font-normal leading-normal">
            <div id="ballsWaveG_1" class="ballsWaveG"></div>
            <div id="ballsWaveG_2" class="ballsWaveG"></div>
            <div id="ballsWaveG_3" class="ballsWaveG"></div>
            <div id="ballsWaveG_4" class="ballsWaveG"></div>
            <div id="ballsWaveG_5" class="ballsWaveG"></div>
            <div id="ballsWaveG_6" class="ballsWaveG"></div>
            <div id="ballsWaveG_7" class="ballsWaveG"></div>
            <div id="ballsWaveG_8" class="ballsWaveG"></div>
            </div>
        </div>
        </div>
    </div>
    <div class="message-api text-center"></div>
    <div class="clr"></div>
</div>
<script type="text/javascript">


function uploadDocumentFooter(args) {
document.querySelector("#visa-form-resize .Loading_Form").style.display = 'block';
const captcha = document.querySelector("#visa-form-resize.form-container").querySelector("#captchaContainer input[name='captcha']").value;
const captchaid = document.querySelector("#visa-form-resize.form-container").querySelector("#captchaContainer input[name='captchaid']").value;
const stringJson = JSON.stringify(args.source?.rows[0]);
$bc.setSource("cms.uploadFooter", {
value: stringJson,
captcha: captcha,
captchaid: captchaid,
run: true
});
};


function refreshCaptchaFooter(e) {
$bc.setSource("captcha.refreshFooter", true);
};

function captchaRenderedFooter() {
document.querySelector("#visa-form-resize .contactUsInput").placeholder = "کد امنیتی";
}

async function OnProcessedEditObjectFooter(args) {
var response = args.response;
var json = await response.json();
var errorid = json.errorid;
if (errorid == "6") {
document.querySelector("#visa-form-resize .Loading_Form").style.display = 'none';
document.querySelector("#visa-form-resize .message-api").innerHTML = "درخواست شما با موفقیت ثبت شد.";
} else {
    refreshCaptchaFooter() 
setTimeout(() => {
document.querySelector("#visa-form-resize .Loading_Form").style.display = 'none';
document.querySelector("#visa-form-resize .message-api").innerHTML = "خطایی رخ داده, لطفا مجدد اقدام کنید.";
}, 2000);
}
}

async function RenderFormFooter() {
var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-editorname-ans input');
inputElementVisa7.setAttribute('placeholder', 'نام و نام خانوادگی تکمیل کننده فرم');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-name-ans input');
inputElementVisa7.setAttribute('placeholder', 'نام');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-lastname-ans input');
inputElementVisa7.setAttribute('placeholder', 'نام خانوادگی');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-gender-ans input');
inputElementVisa7.setAttribute('placeholder', 'جنسیت');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-lastnationality-ans input');
inputElementVisa7.setAttribute('placeholder', 'تابعیت قبلی');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-nationality-ans input');
inputElementVisa7.setAttribute('placeholder', 'تابعیت فعلی');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-father-ans input');
inputElementVisa7.setAttribute('placeholder', 'نام پدر');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-birthcountry-ans input');
inputElementVisa7.setAttribute('placeholder', 'کشور محل تولد');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-birth-ans input');
inputElementVisa7.setAttribute('placeholder', 'تاریخ تولد');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-marriage-ans input');
inputElementVisa7.setAttribute('placeholder', 'وضعیت تاهل');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-job-ans input');
inputElementVisa7.setAttribute('placeholder', 'شغل');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-lastjob-ans input');
inputElementVisa7.setAttribute('placeholder', 'شغل قبلی');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-workaddress-ans input');
inputElementVisa7.setAttribute('placeholder', 'آدرس محل کار');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-passport-ans input');
inputElementVisa7.setAttribute('placeholder', 'شماره گذرنامه');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-passporttype-ans input');
inputElementVisa7.setAttribute('placeholder', 'نوع پاسپورت');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-issuedate-ans input');
inputElementVisa7.setAttribute('placeholder', 'تاریخ صدور');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-passportexpirydate-ans input');
inputElementVisa7.setAttribute('placeholder', 'تاریخ انقضا');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-mobile-ans input');
inputElementVisa7.setAttribute('placeholder', 'تلفن همراه');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-email-ans input');
inputElementVisa7.setAttribute('placeholder', 'آدرس ایمیل');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-phone2-ans input');
inputElementVisa7.setAttribute('placeholder', 'شماره تلفن یکی از نزدیکان');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-duration-ans input');
inputElementVisa7.setAttribute('placeholder', 'مدت سفر');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-duration2-ans input');
inputElementVisa7.setAttribute('placeholder', 'مدت سفر');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-arrival-ans input');
inputElementVisa7.setAttribute('placeholder', 'حدود تاریخ ورود');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-departure-ans input');
inputElementVisa7.setAttribute('placeholder', 'حدود تاریخ خروج');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-airportarrival-ans input');
inputElementVisa7.setAttribute('placeholder', 'فرودگاه یا محل ورود مهمان به ایران');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-airportdeparture-ans input');
inputElementVisa7.setAttribute('placeholder', 'فرودگاه یا محل خروج مهمان از ایران');

var inputElementVisa7 = document.querySelector('#visa-form-resize .visa-address-ans input');
inputElementVisa7.setAttribute('placeholder', 'آدرس محل اقامت مهمان در کشوری که مقیم است');

}
</script>